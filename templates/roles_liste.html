{% extends "base.html" %}

{% block title %}Rôles{% endblock %}

{% block content %}

  <h1 class="mb-3">Rôles</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mt-2">
        {% for category, message in messages %}
          <div class="alert alert-{{ 'warning' if category == 'error' else category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <div class="mb-3">
    <a href="{{ url_for('role_nouveau') }}" class="btn btn-primary">➕ Nouveau</a>
  </div>

  <div class="card">
    <div class="card-header">Liste</div>
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for x in roles %}
            <tr>
              <td>{{ x.id }}</td>
              <td>{{ x.nom }}</td>
              <td>
                <a href="{{ url_for('role_modifier', role_id=x.id) }}" class="btn btn-sm btn-warning">Modifier</a>
                <form action="{{ url_for('role_supprimer', role_id=x.id) }}" method="post"
                      class="d-inline"
                      onsubmit="return confirm('Supprimer ?');">
                  <button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
                </form>
              </td>
            </tr>
          {% else %}
            <tr>
              <td colspan="3" class="text-center">Aucun enregistrement.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <a href="{{ url_for('index') }}" class="btn btn-link mt-3">Retour à l'accueil</a>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
